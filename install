case $(uname -ms) in
'Darwin x86_64')
    target=darwin-x64
    ;;
'Darwin arm64')
    target=darwin-arm64
    ;;
'Linux aarch64' | 'Linux arm64')
    target=linux-arm64
    ;;
'Linux x86_64')
    target=linux-x64
    ;;
*)
    echo "unsupported platform" >&2
    exit 1
    ;;
esac

curl -fsSLo /usr/local/bin/bermuda https://github.com/bermudabay/bin/releases/latest/download/bermuda-$target
chmod +x /usr/local/bin/bermuda
echo "installed at /usr/local/bin/bermuda"

case :$PATH: in
*:/usr/local/bin:*) ;; # noop
*) echo -e "/usr/local/bin is not in \$PATH - to add it run:\necho 'export PATH=\$PATH:/usr/local/bin' >> ~/.profile";
esac
